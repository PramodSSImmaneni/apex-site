<html lang="en"><head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Apex is an enterprise grade native YARN big data-in-motion platform that unifies stream processing as well as batch processing.">
    <meta name="author" content="Apache Software Foundation">
    <link rel="icon" href="favicon.ico">

    <title>Apache Apex (Incubating)</title>

    <!-- Main Stylesheet -->
    <link href="css/main.css" rel="stylesheet">

  </head>

  <body>
    <nav class="navbar navbar-default navbar-static-top" id="main-nav">
      <div class="container">

      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="images/apex-logo.svg" class="logo" alt="Apache Apex Logo">
          Apache Apex
          <small>(incubating)</small>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-right navbar-nav">
          <li class="nav-item">
            <a class="nav-link " href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/announcements.html">Announcements</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/community.html">Community</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/docs.html">Docs</a>
          </li>
          <li class="nav-item">
            <a href="#" data-toggle="dropdown" class="dropdown-toggle nav-link">Source<b class="caret"></b></a>
             <ul class="dropdown-menu">
              <li><a href="https://git-wip-us.apache.org/repos/asf?p=incubator-apex-core.git">Apex Core (ASF)</a></li>
              <li><a href="https://github.com/apache/incubator-apex-core">Apex Core (Github Mirror)</a></li>
              <li><a href="https://git-wip-us.apache.org/repos/asf?p=incubator-apex-malhar.git">Apex Malhar (ASF)</a></li>
              <li><a href="https://github.com/apache/incubator-apex-malhar">Apex Malhar (Github Mirror)</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" data-toggle="dropdown" class="dropdown-toggle nav-link">Apache<b class="caret"></b></a>
             <ul class="dropdown-menu">
              <li><a href="http://incubator.apache.org/projects/apex.html">Status Page</a></li>
              <li><a href="http://www.apache.org/foundation/how-it-works.html">Apache Foundation</a></li>
              <li><a href="http://www.apache.org/licenses/">Apache License</a></li>
              <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-success" href="/downloads.html">Download</a>
          </li>
        </ul>
        
      </div>
    </nav>
<div class="container">
  
  <h1 id="how-to-verify-apache-apex-incubating-release-candidate-builds">How to verify Apache Apex (incubating) release candidate builds</h1>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li><p>Download the KEYS file and import it.  Verify that the key just imported is correct.<br>This is one time activity.</p>
<pre><code class="lang-bash">wget https://dist.apache.org/repos/dist/release/incubator/apex/KEYS
gpg --import KEYS
gpg --fingerprint D920A98C
</code></pre>
<p>More about key verification at <a href="http://www.apache.org/info/verification.html">http://www.apache.org/info/verification.html</a></p>
</li>
<li><p>You can also created your own key which is required if you would like to sign the build. This step is optional.</p>
<pre><code class="lang-bash">gpg --gen-key
</code></pre>
<p>Please provide 4096 as keysize while generating the key.</p>
</li>
</ol>
<h2 id="file-integrity-check">File integrity check</h2>
<p>Download all files present in staging directory of the RC build. Staging directory link is shared in VOTE thread of the release candidate. It is recommended that these files are downloaded in a clean directory.</p>
<pre><code class="lang-bash">wget -r -np -nd &lt;staging-area-link&gt;/
</code></pre>
<p>Note the link should end with &quot;/&quot;.</p>
<p>Define the apex release candidate variable. We will set it up <em>apex-3.3.0-incubating</em> as an example.</p>
<pre><code class="lang-bash">APEX_RELEASE_CANDIDATE=apex-3.3.0-incubating
</code></pre>
<p>Verify integrity of tar.gz file:</p>
<pre><code class="lang-bash">gpg --verify $APEX_RELEASE_CANDIDATE-source-release.tar.gz.asc
md5sum --check $APEX_RELEASE_CANDIDATE-source-release.tar.gz.md5
sha512sum --check $APEX_RELEASE_CANDIDATE-source-release.tar.gz.sha
</code></pre>
<p>Verify integrity of .zip file:</p>
<pre><code class="lang-bash">gpg --verify $APEX_RELEASE_CANDIDATE-source-release.zip.asc
md5sum --check $APEX_RELEASE_CANDIDATE-source-release.zip.md5
sha512sum --check $APEX_RELEASE_CANDIDATE-source-release.zip.sha
</code></pre>
<h2 id="source-code-verification">Source code verification</h2>
<p>You can extract source either using .tar.gz file or .zip file.</p>
<h3 id="using-tar-gz-source">Using .tar.gz source</h3>
<p>Extract source using .tar.gz:</p>
<pre><code class="lang-bash">tar -zxvf $APEX_RELEASE_CANDIDATE-source-release.tar.gz
</code></pre>
<h3 id="using-zip-source">Using .zip source</h3>
<pre><code class="lang-bash">unzip $APEX_RELEASE_CANDIDATE-source-release.zip
</code></pre>
<p>Any of the two commands above will create a directory named after <em>apex release candidate</em>.</p>
<p>Change directory:</p>
<pre><code class="lang-bash">cd $APEX_RELEASE_CANDIDATE
</code></pre>
<h3 id="miscellaneous-checks-part-i-pre-compilation-">Miscellaneous checks: Part I (Pre Compilation)</h3>
<ol>
<li>Existence of DISCLAIMER, LICENSE, NOTICE, README.md and CHANGELOG.md files.<br>Please make sure these files are present in the parent folder after extracting the zip or tar. The CHANGELOG.md file should contain change log for the current release.</li>
<li>No unexpected binary files in the sources.<br>The extracted directory should not contain any binary. Need to test this before compiling the source code.<pre><code class="lang-bash">find . -type f -name &#39;*.*&#39; | sed &#39;s|.*\.||&#39; | sort -u
</code></pre>
Please make sure no binary extension is listed here. Likely candidates are .jar files.  Additionally, for Malhar, demo package files, i.e. .apa files.</li>
</ol>
<h3 id="check-for-compilation-license-headers-etc-">Check for compilation, license headers, etc.</h3>
<p>For Apex:</p>
<pre><code class="lang-bash">mvn clean apache-rat:check verify -Dlicense.skip=false install
</code></pre>
<p>For Malhar:</p>
<pre><code class="lang-bash">mvn clean apache-rat:check verify -Dlicense.skip=false -Pall-modules install
</code></pre>
<p>Jars should be installed in your maven repository, typically in <em>~/.m2/repository/org/apache/apex/</em> directory</p>
<p>Following step is optional and needs prerequisite 2 given above.</p>
<pre><code class="lang-bash">mvn verify -Papache-release -DskipTests
</code></pre>
<h2 id="launch-demos">Launch demos</h2>
<p>For verification of Apex build, check backward compatibility with respect to Malhar. Locally update <em>apex.core.version</em> in Malhar to point to <em>to-be released</em> version of apex-core and recompile Malhar.</p>
<p>Launch few demos to make sure everything is working fine using <em>dtcli</em> utitlity. The dtcli script is present at <apex-core-folder>/engine/src/main/scripts/dtcli . If apex-core is being verified, then simply use engine/src/main/scripts/dtcli to launch the script. Otherwise, prefix it with apex-core folder path.</p>
<pre><code class="lang-bash">engine/src/main/scripts/dtcli
</code></pre>
<p>You will get dtcli prompt, where demos can be launched.</p>
<pre><code class="lang-bash">dt&gt; launch &lt;demo-apa-file&gt;
</code></pre>
<p>Demo apa files are typically in incubating-apex-malhar/demos directory.</p>
<h2 id="miscellaneous-checks-part-ii-post-compilation-">Miscellaneous checks: Part II (Post compilation)</h2>
<ol>
<li>Correct artifact names<br>All the apex artifacts generated in local maven build directory should contain classs jar, sources jars, javadocs jar. All the artifacts are under <em>~/.m2/repository/org/apache/apex/</em> directory.</li>
</ol>

</div>

  <hr>
  <div class="container">
    <footer id="main-footer">
      <p>
        Copyright &copy; <span id="copyright-year">2015</span> <a href="http://apache.org">The Apache Software Foundation</a>,
        Licensed under the Apache License, Version 2.0<br>
        Apache and the Apache feather logo are trademarks of The Apache Software Foundation.<br>
        <a class="footer-link-img" href="http://apache.org"><img src="/images/asf-feather.png" alt="The Apache Software Foundation"></a>
        <a class="footer-link-img" href="http://incubator.apache.org/"><img src="/images/incubator-egg.png" alt="Apache Incubator"></a>
      </p>
      <p class="text-muted">
        <small>Apache Apex is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</small>
      </p>
    </footer>
  </div> <!-- /container -->

  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script>
    $('#copyright-year').text((new Date()).getFullYear());
  </script>

</body>
</html>
